<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Private â€” Admin Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Admin Panel</h1>
    <input type="file" id="imageUpload" accept="image/*" multiple>
    <input type="number" id="priceInput" placeholder="Price for selected image" step="0.01">
    <button onclick="addImages()">Add Images</button>
    <button onclick="logout()">Logout</button>

    <div id="previewContainer"></div>
  </div>

<script>
if(localStorage.getItem("isAdmin") !== "true") {
  alert("Unauthorized! Redirecting to login...");
  window.location.href = "admin.html";
}

function addImages() {
  const files = document.getElementById("imageUpload").files;
  const price = parseFloat(document.getElementById("priceInput").value);
  if(!files.length || isNaN(price)) { alert("Select images and enter price!"); return; }

  const gallery = JSON.parse(localStorage.getItem("gallery") || "[]");

  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = () => {
      gallery.push({ src: reader.result, price: price });
      localStorage.setItem("gallery", JSON.stringify(gallery));
      showGallery();
    };
    reader.readAsDataURL(file);
  });
}

function showGallery() {
  const container = document.getElementById("previewContainer");
  const gallery = JSON.parse(localStorage.getItem("gallery") || "[]");
  container.innerHTML = "";
  gallery.forEach((img, idx) => {
    container.innerHTML += `
      <div class="preview-box">
        <img src="${img.src}" style="width:150px;">
        <p>$${img.price}</p>
      </div>
    `;
  });
}

function logout() {
  localStorage.removeItem("isAdmin");
  window.location.href = "admin.html";
}

showGallery();
</script>
</body>
</html>